<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>IT Room</title>
        <!-- in the <head> section of your HTML -->
        <script src="https://app.smplrspace.com/lib/smplr.js"></script>
        <link href="https://app.smplrspace.com/lib/smplr.css" rel="stylesheet" />

    </head>
    <body>
        <div id="container"></div>
        <script type="module" src="./data001.js"></script>

        <script type="module">
import {Desk, Servers, AC, Departments} from './data001.js'
const space = new smplr.Space({
    spaceId: "b6e6acf9-1524-4f2b-a257-c6edd64832e0",
    clientToken: "pub_fc4b7f5e33bd49cf98912c56c404de8c",
    containerId: "container",
});

space.startViewer({
    preview:true,
    loadingMessage: "Hello From Mobinets Workspace",
    mode: '3d' ,
    allowModeChange:true,
    // onModeChange: ( '2d'),
    onReady:()=>{console.log("===> View IS READY");
                 console.log("===>Calling UpdateDataLayers()");
                 updateDataLayers();
                 console.log("===>After calling UpdateDataLayers()");
                },
    onError: (error) => console.error("Could not start viewer", error),
  }) 

  
  function updateDataLayers() {
    space.removeDataLayer('IT_Room');


    space.addDataLayer({
        id:"Desk",
        type: 'furniture',
        data: Desk,
        tooltip: (d) => `${d.name} - ${d.Employee == '' ? 'free' : d.Employee}`,
        color: (d) => (d.Employee == '' ? '#f75e56' : '#03fc24'),
    });


    space.addDataLayer({
        id:"Servers",
        type: 'furniture',
        data: Servers,
        tooltip: (d) => `${d.name} - ${d.Brand} -${d.temprature}! ${d.temprature > 65 ? 'Hot Temp' : 'Normal Temp'}`,
        color: (d) => `${d.temprature >= 65 ? '#f75e56' :'#50b268'}`,
    });
    
    space.addDataLayer({
        id:"AC",
        type: 'furniture',
        data: AC,
        tooltip: (d) => `${d.name} - ${d.Brand}`,
        color: (d) => (d.ON ? '#0398fc' : '#f75e56'),
    });

    // space.addDataLayer({
    //     id: "Departments",
    //     type: 'polygon',
    //     data: Departments,
    //     baseHeight: 0,
    //     height: 1.5,
    //     color: (d) => (d.name == 'Dev' ? '#0398fc' : '#5feb63'),
    //     alpha: 0.5,
    //     tooltip: (d) => `Dep: ${d.name}`,
    // })

}
</script>

    </body>
</html>